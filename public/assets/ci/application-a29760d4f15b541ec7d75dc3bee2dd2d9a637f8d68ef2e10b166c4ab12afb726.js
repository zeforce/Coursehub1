(function(){this.Pager={init:function(t,e,i,n){return this.limit=null!=t?t:0,this.disable=null!=i?i:!1,this.callback=null!=n?n:$.noop,this.loading=$(".loading").first(),e?(this.offset=0,this.getOld()):this.offset=this.limit,this.initLoadMore()},getOld:function(){return this.loading.show(),$.ajax({type:"GET",url:$(".content_list").data("href")||location.href,data:"limit="+this.limit+"&offset="+this.offset,complete:function(t){return function(){return t.loading.hide()}}(this),success:function(t){return Pager.append(t.count,t.html),Pager.callback()},dataType:"json"})},append:function(t,e){return $(".content_list").append(e),t>0?this.offset+=t:this.disable=!0},initLoadMore:function(){return $(document).unbind("scroll"),$(document).endlessScroll({bottomPixels:400,fireDelay:1e3,fireOnce:!0,ceaseFire:function(){return Pager.disable},callback:function(t){return function(e){return t.loading.is(":visible")?void 0:(t.loading.show(),Pager.getOld())}}(this)})}}}).call(this),function(t){window.NestedFormEvents=function(){this.addFields=t.proxy(this.addFields,this),this.removeFields=t.proxy(this.removeFields,this)},NestedFormEvents.prototype={addFields:function(e){var i=e.currentTarget,n=t(i).data("association"),s=t("#"+t(i).data("blueprint-id")),r=s.data("blueprint"),a=(t(i).closest(".fields").closestChild("input, textarea, select").eq(0).attr("name")||"").replace(new RegExp("[[a-z_]+]$"),"");if(a)for(var o=a.match(/[a-z_]+_attributes(?=\]\[(new_)?\d+\])/g)||[],d=a.match(/[0-9]+/g)||[],l=0;l<o.length;l++)d[l]&&(r=r.replace(new RegExp("(_"+o[l]+")_.+?_","g"),"$1_"+d[l]+"_"),r=r.replace(new RegExp("(\\["+o[l]+"\\])\\[.+?\\]","g"),"$1["+d[l]+"]"));var u=new RegExp("new_"+n,"g"),c=this.newId();r=t.trim(r.replace(u,c));var h=this.insertFields(r,n,i);return h.trigger({type:"nested:fieldAdded",field:h}).trigger({type:"nested:fieldAdded:"+n,field:h}),!1},newId:function(){return(new Date).getTime()},insertFields:function(e,i,n){var s=t(n).data("target");return s?t(e).appendTo(t(s)):t(e).insertBefore(n)},removeFields:function(e){var i=t(e.currentTarget),n=i.data("association"),s=i.prev("input[type=hidden]");s.val("1");var r=i.closest(".fields");return r.hide(),r.trigger({type:"nested:fieldRemoved",field:r}).trigger({type:"nested:fieldRemoved:"+n,field:r}),!1}},window.nestedFormEvents=new NestedFormEvents,t(document).delegate("form a.add_nested_fields","click",nestedFormEvents.addFields).delegate("form a.remove_nested_fields","click",nestedFormEvents.removeFields)}(jQuery),/*
 * Copyright 2011, Tobias Lindig
 *
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 */
function(t){t.fn.closestChild=function(e){if(e&&""!=e){var i=[];for(i.push(this);i.length>0;)for(var n=i.shift(),s=n.children(),r=0;r<s.length;++r){var a=t(s[r]);if(a.is(e))return a;i.push(a)}}return t()}}(jQuery),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.CiBuild=function(){function e(i,n,s){this.build_url=i,this.build_status=n,this.state=s,this.hideSidebar=t(this.hideSidebar,this),this.toggleSidebar=t(this.toggleSidebar,this),clearInterval(e.interval),this.bp=Breakpoints.get(),this.hideSidebar(),$(".js-build-sidebar").niceScroll(),$(document).off("click",".js-sidebar-build-toggle").on("click",".js-sidebar-build-toggle",this.toggleSidebar),$(window).off("resize.build").on("resize.build",this.hideSidebar),this.updateArtifactRemoveDate(),$("#build-trace").length&&(this.getInitialBuildTrace(),this.initScrollButtonAffix()),("running"===this.build_status||"pending"===this.build_status)&&($("#autoscroll-button").on("click",function(){var t;return t=$(this).data("state"),"enabled"===t?($(this).data("state","disabled"),$(this).text("enable autoscroll")):($(this).data("state","enabled"),$(this).text("disable autoscroll"))}),e.interval=setInterval(function(t){return function(){return window.location.href.split("#").first()===t.build_url?t.getBuildTrace():void 0}}(this),4e3))}return e.interval=null,e.state=null,e.prototype.getInitialBuildTrace=function(){return $.ajax({url:this.build_url,dataType:"json",success:function(t){return $(".js-build-output").html(t.trace_html),"success"===t.status||"failed"===t.status?$(".js-build-refresh").remove():void 0}})},e.prototype.getBuildTrace=function(){return $.ajax({url:this.build_url+"/trace.json?state="+encodeURIComponent(this.state),dataType:"json",success:function(t){return function(e){return e.state&&(t.state=e.state),"running"===e.status?(e.append?$(".js-build-output").append(e.html):$(".js-build-output").html(e.html),t.checkAutoscroll()):e.status!==t.build_status?Turbolinks.visit(t.build_url):void 0}}(this)})},e.prototype.checkAutoscroll=function(){return"enabled"===$("#autoscroll-button").data("state")?$("html,body").scrollTop($("#build-trace").height()):void 0},e.prototype.initScrollButtonAffix=function(){var t,e,i;return e=$("#js-build-scroll"),t=$("body"),i=$("#build-trace"),e.affix({offset:{bottom:function(){return t.outerHeight()-(i.outerHeight()+i.offset().top)}}})},e.prototype.shouldHideSidebar=function(){var t;return t=this.bp.getBreakpointSize(),"xs"===t||"sm"===t},e.prototype.toggleSidebar=function(){return this.shouldHideSidebar()?$(".js-build-sidebar").toggleClass("right-sidebar-expanded right-sidebar-collapsed"):void 0},e.prototype.hideSidebar=function(){return this.shouldHideSidebar()?$(".js-build-sidebar").removeClass("right-sidebar-expanded").addClass("right-sidebar-collapsed"):$(".js-build-sidebar").removeClass("right-sidebar-collapsed").addClass("right-sidebar-expanded")},e.prototype.updateArtifactRemoveDate=function(){var t,e;return t=$(".js-artifacts-remove"),t.length?(e=t.text(),t.text($.timefor(new Date(e)," "))):void 0},e}()}.call(this),function(){$(document).on("click",".badge-codes-toggle",function(){return $(".badge-codes-block").toggleClass("hide"),!1})}.call(this),function(){$(document).on("click",".assign-all-runner",function(){return $(this).replaceWith('<i class="fa fa-refresh fa-spin"></i> Assign in progress..')}),window.unbindEvents=function(){return $(document).unbind("scroll"),$(document).off("scroll")},document.addEventListener("page:fetch",unbindEvents)}.call(this);